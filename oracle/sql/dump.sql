ALTER SESSION SET CONTAINER = testPDB;

CREATE USER testuser IDENTIFIED BY "testpassword";

GRANT CONNECT TO testuser CONTAINER=CURRENT;
GRANT CREATE SESSION TO testuser CONTAINER=CURRENT;
GRANT RESOURCE TO testuser CONTAINER=CURRENT;

ALTER USER testuser QUOTA 5000M ON USERS;

ALTER SESSION SET CURRENT_SCHEMA = testuser;

DROP TABLE PERSONA;

DROP TABLE ASEGURADORA;

DROP TABLE VEHICULO;

-- Creación de la tabla PERSONA
CREATE TABLE PERSONA (
    DNI VARCHAR2(9) PRIMARY KEY,
    NOMBRE VARCHAR2(50),
    APELLIDOS VARCHAR2(100),
    SEXO CHAR(1),
    FECHA_NACIMIENTO DATE,
    DIRECCION VARCHAR2(100),
    LOCALIDAD VARCHAR2(50),
    PROVINCIA VARCHAR2(50)
);

-- Creación de la tabla ASEGURADORA
CREATE TABLE ASEGURADORA (
    CIF VARCHAR2(15) PRIMARY KEY,
    NOMBRE VARCHAR2(100),
    DIRECCION_SEDE VARCHAR2(100),
    LOCALIDAD VARCHAR2(50),
    PROVINCIA VARCHAR2(50)
);

-- Creación de la tabla VEHICULO
CREATE TABLE VEHICULO (
    NUMERO_BASTIDOR VARCHAR2(20) PRIMARY KEY,
    DNI_PROPIETARIO VARCHAR2(9),
    PESO NUMBER(8,2),
    ITV_EN_VIGOR CHAR(1),
    MODELO VARCHAR2(50),
    MATRICULA VARCHAR2(10),
    SEGURO_EN_VIGOR CHAR(1),
    CIF_ASEGURADORA VARCHAR2(15),
    FOREIGN KEY (DNI_PROPIETARIO) REFERENCES PERSONA(DNI),
    FOREIGN KEY (CIF_ASEGURADORA) REFERENCES ASEGURADORA(CIF)
);

CREATE TABLE CARREVIEWED (
    WEIGHT NUMBER,
    PLATE VARCHAR2(7),
    MODEL VARCHAR2(50),
    CHASSIS NUMBER(19),
    CAR_STATE VARCHAR2(50),
    OWNER_ID VARCHAR2(50),
    OWNER VARCHAR2(50),
    INSURANCE_ID VARCHAR2(9),
    INSURANCE VARCHAR2(50)
);

