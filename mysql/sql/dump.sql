CREATE DATABASE IF NOT EXISTS test;

USE test;

DROP TABLE IF EXISTS PERSONA;

DROP TABLE IF EXISTS ASEGURADORA;

DROP TABLE IF EXISTS VEHICULO;

-- Creación de la tabla PERSONA
CREATE TABLE PERSONA (
    DNI VARCHAR(9) PRIMARY KEY,
    NOMBRE VARCHAR(50),
    APELLIDOS VARCHAR(100),
    SEXO CHAR(1),
    FECHA_NACIMIENTO DATE,
    DIRECCION VARCHAR(100),
    LOCALIDAD VARCHAR(50),
    PROVINCIA VARCHAR(50)
) ENGINE=INNODB;

-- Creación de la tabla ASEGURADORA
CREATE TABLE ASEGURADORA (
    CIF VARCHAR(15) PRIMARY KEY,
    NOMBRE VARCHAR(100),
    DIRECCION_SEDE VARCHAR(100),
    LOCALIDAD VARCHAR(50),
    PROVINCIA VARCHAR(50)
) ENGINE=INNODB;

-- Creación de la tabla VEHICULO
CREATE TABLE VEHICULO (
    NUMERO_BASTIDOR VARCHAR(20) PRIMARY KEY,
    DNI_PROPIETARIO VARCHAR(9),
    PESO DECIMAL(8,2),
    ITV_EN_VIGOR CHAR(1),
    MODELO VARCHAR(50),
    MATRICULA VARCHAR(10),
    SEGURO_EN_VIGOR CHAR(1),
    CIF_ASEGURADORA VARCHAR(15),
    FOREIGN KEY (DNI_PROPIETARIO) REFERENCES PERSONA(DNI),
    FOREIGN KEY (CIF_ASEGURADORA) REFERENCES ASEGURADORA(CIF)
) ENGINE=INNODB;


CREATE TABLE CARREVIEWED (
    WEIGHT INT,
    PLATE VARCHAR(7),
    MODEL VARCHAR(50),
    CHASSIS BIGINT,
    CAR_STATE VARCHAR(50),
    OWNER_ID VARCHAR(50),
    OWNER VARCHAR(50),
    INSURANCE_ID VARCHAR(9),
    INSURANCE VARCHAR(50)
) ENGINE=INNODB;